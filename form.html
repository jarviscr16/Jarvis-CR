<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Get Plan | Jarvis CR</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<section class="form-section">
  <h1>Get Your Plan</h1>
  <p class="subtitle">Fill the form below â€” Iâ€™ll reach out on Discord.</p>

  <form id="planForm">
    <input type="text" placeholder="Discord ID" required>
    <input type="text" placeholder="In-Game Name" required>
    <input type="email" placeholder="Email Address" required>
    <input type="text" placeholder="Main Deck" required>
    <input type="text" id="plan" placeholder="Chosen Plan" disabled>

    <button type="submit">Submit Request</button>
  </form>
</section>

<script>
  const params = new URLSearchParams(window.location.search);
  document.getElementById("plan").value = params.get("plan") || "";

  const webhookURL = "https://discord.com/api/webhooks/1447076466096472275/BzdrUaq8ojeRWpNz_qwNVSWDA7WvxAWJ0OEwnOVxBtKx-y8URpah_yRtKvhj5v_spqPy";

  document.getElementById("planForm").addEventListener("submit", function(e) {
    e.preventDefault();

    const inputs = document.querySelectorAll("input");
    const data = {
      embeds: [{
        title: "ðŸ“© New Coaching Request",
        color: 16763904,
        fields: [
          { name: "Discord ID", value: inputs[0].value },
          { name: "In-Game Name", value: inputs[1].value },
          { name: "Email", value: inputs[2].value },
          { name: "Main Deck", value: inputs[3].value },
          { name: "Plan", value: inputs[4].value }
        ]
      }]
    };

    fetch(webhookURL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(data)
    }).then(() => {
      alert("âœ… Submitted successfully!");
      document.getElementById("planForm").reset();
    });
  });
</script>

</body>
</html>
